{% extends "base.html" %}
{% load static %}

{% block title %}Register | Step 3{% endblock %}
{% block body_class %}auth-body{% endblock %}

{% block content %}
  <div class="auth-shell">
    <aside class="auth-left">
      <a href="{% url 'landing' %}" class="auth-logo-link" aria-label="Back to InternLink home">
        <img class="auth-left-logo"
             src="{% static 'img/internlink_logo_white.png' %}"
             alt="InternLink">

        <span class="auth-logo-hint">Back to home</span>
      </a>
    </aside>

    <!-- Keep top-aligned (scroll-friendly) on long pages -->
    <main class="auth-right">
      <div class="auth-card">
        <h2>Create Login</h2>

        <div class="wizard-meta">
          <div class="stepper"><span style="width: 75%;"></span></div>
          <div class="step-text">Step 3 of 4</div>
        </div>

        {% if form.errors %}
          <div class="alert alert--error">
            <div class="alert__title">Please fix the highlighted fields.</div>
            {% if form.non_field_errors %}
              <div class="alert__body">{{ form.non_field_errors.0 }}</div>
            {% endif %}
          </div>
        {% endif %}

        <form method="post" novalidate class="card-soft">
          {% csrf_token %}

          <div class="form-grid">
            <div class="grid-full">
              <div class="input-wrap">
                <label>Username</label>
                <input type="text" name="username" required value="{{ form.username.value|default_if_none:'' }}">
                {% if form.username.errors %}
                  <div class="field-err">{{ form.username.errors.0 }}</div>
                {% endif %}
              </div>
            </div>

            <div class="grid-full">
              <div class="input-wrap">
                <label>Email</label>
                <input type="email" name="email" required value="{{ form.email.value|default_if_none:'' }}">
                {% if form.email.errors %}
                  <div class="field-err">{{ form.email.errors.0 }}</div>
                {% endif %}
              </div>
            </div>

            <div>
              <div class="input-wrap">
                <label>Password</label>
                <input type="password" name="password1" required>
                {% if form.password1.errors %}
                  <div class="field-err">{{ form.password1.errors.0 }}</div>
                {% endif %}
              </div>
            </div>

            <div>
              <div class="input-wrap">
                <label>Confirm Password</label>
                <input type="password" name="password2" required>
                {% if form.password2.errors %}
                  <div class="field-err">{{ form.password2.errors.0 }}</div>
                {% endif %}
              </div>
            </div>

            <div class="grid-full">
              <label class="check check-agree">
                <input type="checkbox" name="agree" {% if form.agree.value %}checked{% endif %} required>
                I agree to the terms and policies
              </label>
              {% if form.agree.errors %}
                <div class="field-err">{{ form.agree.errors.0 }}</div>
              {% endif %}
            </div>
          </div>

          <div class="wizard-actions">
            <a class="btn-ghost" href="{% url 'register_details' %}">Back</a>
            <button class="btn-primary" type="submit">Create Account</button>
          </div>
        </form>

      </div>
    </main>
  </div>
{% endblock %}
